@startuml
!include ../_template_styles.puml
' FAILURE: NETWORK PARTITION (SPLIT-BRAIN) - Mixed layout for PPTX
top to bottom direction

rectangle "**Partition A**" #FFFFFF {
    component "**Client A**\n<size:10>Writes</size>" as CA <<Primary>>
    database "**Node A**\n<size:10>Accepts writes</size>" as NA <<up>>
    CA -down[#5C6BC0,thickness=2]-> NA : <color:#3949AB>writes</color>
}

rectangle "**Partition B**" #FFFFFF {
    component "**Client B**\n<size:10>Writes</size>" as CB <<Primary>>
    database "**Node B**\n<size:10>Accepts writes</size>" as NB <<up>>
    database "**Node C**\n<size:10>Replica</size>" as NC <<up>>
    CB -down[#5C6BC0,thickness=2]-> NB : <color:#3949AB>writes</color>
    NB -right[#00897B,thickness=2]- NC : <color:#3949AB>replicate</color>
}

component "**Network partition**\n<size:10>No sync</size>" as PART <<failure>>

together {
    component "**Conflict resolution**\n<size:10>Quorum / LWW / manual</size>" as RESOLVE <<Control>>
    database "**Merged state**\n<size:10>Reconciled</size>" as MERGED <<Schema>>
}

NA -[#D32F2F,thickness=2]right.. PART
NB -[#D32F2F,thickness=2]left.. PART

NA -down[#5C6BC0,thickness=2]-> RESOLVE : <color:#3949AB>divergent</color>
NB -down[#5C6BC0,thickness=2]-> RESOLVE : <color:#3949AB>divergent</color>
RESOLVE -right[#00897B,thickness=2]-> MERGED : <color:#3949AB>reconcile</color>

@enduml
