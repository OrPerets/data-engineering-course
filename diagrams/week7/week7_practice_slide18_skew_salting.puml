@startuml
'=================================================
' Week 7 Practice: Skew mitigation â€” Salting flow
'=================================================

top to bottom direction
skinparam linetype ortho
skinparam shadowing false
skinparam roundcorner 8
skinparam defaultFontName "Segoe UI", "Helvetica", sans-serif
skinparam defaultFontSize 16
skinparam defaultFontColor #2C3E50
skinparam component { BackgroundColor #FFFFFF; BorderColor #78909C }
skinparam database { BackgroundColor #ECEFF1; BorderColor #546E7A }
skinparam arrow { Color #607D8B }

component "**Large table (Clicks)**\n<size:10>Emit (user_id-salt, click)</size>" as MAP_L
component "**Small table (Users)**\n<size:10>Replicate: (user_id-1..N, user)</size>" as MAP_S

component "**Reducer 1**\n<size:10>888-1</size>" as R1 <<Tool>>
component "**Reducer 2**\n<size:10>888-2</size>" as R2 <<Tool>>
component "**Reducer N**\n<size:10>888-N</size>" as RN <<Tool>>

MAP_L --> R1
MAP_L --> R2
MAP_L --> RN
MAP_S --> R1
MAP_S --> R2
MAP_S --> RN

note bottom of MAP_S
  Salt and replicate:
  heavy key 888 split
  across N reducers.
end note

@enduml
