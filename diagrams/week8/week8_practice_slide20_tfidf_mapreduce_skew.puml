@startuml
'=================================================
' Week 8 Practice: TF-IDF Job 2 skew — "the" hot reducer; stop-list mitigation
'=================================================

top to bottom direction
skinparam linetype ortho
skinparam shadowing false
skinparam roundcorner 8
skinparam defaultFontName "Segoe UI", "Helvetica", sans-serif
skinparam defaultFontSize 16
skinparam defaultFontColor #2C3E50
skinparam rectangle { BackgroundColor #F8F9FA; BorderColor #90A4AE; BorderThickness 2 }
skinparam component { BackgroundColor #FFFFFF; BorderColor #78909C; BorderThickness 1.5 }
skinparam arrow { Color #607D8B; Thickness 1.5 }

rectangle "JOB 2" #F8F9FA {
    component "**Map**\n(term, doc_id)" as M
    component "**Shuffle**\nby term" as S
    component "**Reducer \"the\"**\n<size:10>10 doc_ids (hot)</size>" as R_HOT
    component "**Reducer \"data\"**\n7 doc_ids" as R_DATA
}

rectangle "MITIGATION" #F8F9FA {
    component "**Stop list**\nfilter \"the\" in Job 1 Map" as STOP
    note right of STOP : No (\"the\", doc_id) emitted → Job 2 never sees \"the\"; no hot reducer for \"the\"
}

M --> S
S --> R_HOT
S --> R_DATA

STOP .. M : "drop \"the\""

@enduml
