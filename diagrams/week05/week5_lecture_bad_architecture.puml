@startuml
'=================================================
' BAD ARCHITECTURE: NO PARTITION FILTER -> FULL SCAN
'=================================================

!include ../_template_styles.puml

top to bottom direction

rectangle "BAD (fails at scale)" <<Failure>> {
    component "**BI Report**\n<size:10>Revenue by region</size>" as BI_BAD <<Failure>>
    component "**Query**\n<size:10>No WHERE date_key</size>" as Q_BAD <<Failure>>
    database "**Fact table**\n<size:10>1 TB, 365 partitions</size>" as FACT_BAD <<Failure>>
}
BI_BAD --> Q_BAD
Q_BAD --> FACT_BAD : "Full scan\nall partitions"

rectangle "CORRECT" <<Task>> {
    component "**BI Report**\n<size:10>Revenue by region</size>" as BI_OK <<Control>>
    component "**Query**\n<size:10>WHERE date_key IN (Dec 2025)</size>" as Q_OK <<Task>>
    component "**Pruning**\n<size:10>31 partitions only</size>" as PRUNE <<Task>>
    database "**sales_fact**\n<size:10>Partitioned by date_key</size>" as FACT_OK <<Primary>>
}
BI_OK --> Q_OK
Q_OK --> PRUNE
PRUNE --> FACT_OK : "Scan 31 only"
FACT_BAD --> BI_BAD : "timeout risk"
FACT_OK --> BI_OK : "fast report"

@enduml
